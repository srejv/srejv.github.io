<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>MyPong</title>
  <meta name="description" content="Good day internet friends. I’m writing a post about my pong game. Wont finish today though. I hope to write one about each game that I am making as documenta...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/games/2017/11/02/mypong.html">
  <link rel="alternate" type="application/rss+xml" title="Kewk" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Kewk</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">MyPong</h1>
    <p class="post-meta">
      <time datetime="2017-11-02T00:19:21+01:00" itemprop="datePublished">
        
        Nov 2, 2017
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Good day internet friends. I’m writing a post about my pong game. Wont finish today though. I hope to write one about each game that I am making as documentation practise.
I am using the  <a href="https://www.juce.com/">JUCE</a> framework for this. An “Animated Application” project. I assume you’re intelligent enough to find out how to compile and start using JUCE by yourself. You can still read along, it shouldn’t really matter, only if you want to try it out yourself. I’ve used the JUCE live engine thing for this so..</p>

<p>I assume you know programming and concepts so I’m just gonna go head.</p>

<p>First I’m gonna explain the class MainContentComponent. This is the basis for everything.</p>

<p>And by explain I mean show because it’s super fucking simple. It owns 2 objects.
Game, which owns the GameState, which is passes to the GameUI.
Game - logic.
GameUI - everything on the screen. this is why it’s “addAndMakeVisible”. We need to set the size in the resized function (uses the same size as the parent Component).
Setting size and frames per seconds. It doesn’t need to paint anything, that’s taken care of by the GameUI.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">MainContentComponent</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AnimatedAppComponent</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">MainContentComponent</span><span class="p">()</span> <span class="o">:</span> <span class="n">game</span><span class="p">(),</span> <span class="n">gameUI</span><span class="p">(</span><span class="n">game</span><span class="p">.</span><span class="n">getState</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">addAndMakeVisible</span><span class="p">(</span><span class="n">gameUI</span><span class="p">);</span>
    <span class="n">setSize</span> <span class="p">(</span><span class="n">WINDOW_WIDTH</span><span class="p">,</span> <span class="n">WINDOW_HEIGHT</span><span class="p">);</span>
    <span class="n">setFramesPerSecond</span> <span class="p">(</span><span class="mi">60</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">~</span><span class="n">MainContentComponent</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">game</span><span class="p">.</span><span class="n">update</span><span class="p">();</span> <span class="p">}</span>
  <span class="kt">void</span> <span class="n">paint</span><span class="p">(</span><span class="n">Graphics</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span> <span class="k">override</span> <span class="p">{}</span>
  <span class="kt">void</span> <span class="n">resized</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">gameUI</span><span class="p">.</span><span class="n">setBounds</span><span class="p">(</span><span class="n">getLocalBounds</span><span class="p">());</span> <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
  <span class="n">Game</span> <span class="n">game</span><span class="p">;</span>
  <span class="n">GameUI</span> <span class="n">gameUI</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p>It’s gonna be simple. I’ve split it up into several parts. Note that this is just one way of doing things.</p>

<p>Something should be said. I have almost everything in one file. :( Might fix later.</p>

<ol>
  <li>Screen shots</li>
  <li>Data Model (Player, Ball, GameState, GameOverStateObject)</li>
  <li>View (GameUI)</li>
  <li>Game Logic (Game)</li>
  <li>Helper functions (GameHelpers, PongHelpers)</li>
</ol>

<h1 id="screen-shots">Screen shots</h1>

<p><img src="/assets/screenshot.jpg" alt="My helpful screenshot" /></p>

<h1 id="data-model">Data model</h1>

<p>In a pong game we have 2 entities. The Ball and the Player. They are both represtented in the game as rectangles. The data model is contained in an object called GameState.</p>

<h2 id="ball">Ball</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="n">Ball</span> <span class="p">{</span>
  <span class="c1">// Bounding box - and right now render box
</span>  <span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">body</span><span class="p">;</span>

  <span class="c1">// Colour
</span>  <span class="n">Colour</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">Colour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">);</span>

  <span class="c1">// Speed, the speedx, speedy is the ones used for movement, realSpeed is the multiplier thingy
</span>  <span class="kt">float</span> <span class="n">speedx</span> <span class="o">=</span> <span class="mf">100.0</span><span class="n">f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">speedy</span> <span class="o">=</span> <span class="mf">100.0</span><span class="n">f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">realSpeed</span> <span class="o">=</span> <span class="mf">200.0</span><span class="n">f</span><span class="p">;</span>

  <span class="c1">// Scale for bounce animation
</span>  <span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<h2 id="player">Player</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="n">Player</span> <span class="p">{</span>
  <span class="c1">// Input
</span>  <span class="n">KeyPress</span> <span class="n">up</span><span class="p">;</span>
  <span class="n">KeyPress</span> <span class="n">down</span><span class="p">;</span>

  <span class="c1">// Player - boundingbox, renders this one right now
</span>  <span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">body</span><span class="p">;</span>

  <span class="c1">// Movement Speed
</span>  <span class="kt">float</span> <span class="n">speed</span> <span class="o">=</span> <span class="mf">300.0</span><span class="n">f</span><span class="p">;</span>

  <span class="c1">// Colour
</span>  <span class="n">Colour</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">Colour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">);</span>

  <span class="c1">// Score is kept in the player? Well... it is a personal score I guess.
</span>  <span class="kt">int</span> <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">// Uniform scale of the player
</span>  <span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<h2 id="gamestate">GameState</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="n">GameState</span> <span class="p">{</span>
  <span class="c1">// Game Objects
</span>  <span class="n">vector</span><span class="o">&lt;</span><span class="n">Player</span><span class="o">&gt;</span> <span class="n">players</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">Ball</span><span class="o">&gt;</span> <span class="n">balls</span><span class="p">;</span>

  <span class="c1">// Data
</span>  <span class="kt">float</span> <span class="n">timeSpent</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>

  <span class="c1">// Input
</span>  <span class="n">KeyPress</span> <span class="n">restartGame</span><span class="p">{</span><span class="n">KeyPress</span><span class="o">::</span><span class="n">F5Key</span><span class="p">};</span>

  <span class="c1">// Extra
</span>  <span class="kt">float</span> <span class="n">lineY</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span> <span class="c1">// Middle line for animation
</span><span class="p">};</span></code></pre></figure>

<h1 id="view">View</h1>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">GameUI</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Component</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">GameUI</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span> <span class="n">gameState</span><span class="p">)</span> <span class="o">:</span> <span class="n">state</span><span class="p">(</span><span class="n">gameState</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">paint</span><span class="p">(</span><span class="n">Graphics</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
    <span class="n">paintBackground</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
    <span class="n">paintGame</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
    <span class="n">paintHUD</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
  <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">paintBackground</span><span class="p">(</span><span class="n">Graphics</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">)</span> <span class="c1">// snip
</span>  <span class="kt">void</span> <span class="n">paintGame</span><span class="p">(</span><span class="n">Graphics</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">)</span> <span class="c1">// snip
</span>  <span class="kt">void</span> <span class="n">paintHUD</span><span class="p">(</span><span class="n">Graphics</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">)</span> <span class="c1">// snip
</span>
  <span class="n">GameState</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<h2 id="background">Background</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">paintBackground</span><span class="p">(</span><span class="n">Graphics</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">g</span><span class="p">.</span><span class="n">fillAll</span><span class="p">(</span><span class="n">Colour</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">));</span>

  <span class="n">g</span><span class="p">.</span><span class="n">setColour</span><span class="p">(</span><span class="n">Colour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">));</span>
  <span class="k">const</span> <span class="n">Line</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">line</span><span class="p">(</span><span class="n">WINDOW_WIDTHF</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mf">48.0</span><span class="n">f</span> <span class="o">+</span> <span class="n">state</span><span class="p">.</span><span class="n">lineY</span><span class="p">,</span> <span class="n">WINDOW_WIDTHF</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">,</span> <span class="n">WINDOW_HEIGHTF</span> <span class="o">+</span> <span class="mf">48.0</span><span class="n">f</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">dashLengths</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">16.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">32.0</span><span class="n">f</span> <span class="p">};</span>
  <span class="n">g</span><span class="p">.</span><span class="n">drawDashedLine</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dashLengths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">16.0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h2 id="game">Game</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">paintGame</span><span class="p">(</span><span class="n">Graphics</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Players
</span>  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setColour</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">colour</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">saveState</span><span class="p">();</span>

    <span class="k">auto</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="n">g</span><span class="p">.</span><span class="n">addTransform</span><span class="p">(</span><span class="n">AffineTransform</span><span class="o">::</span><span class="n">translation</span><span class="p">(</span><span class="n">pos</span><span class="p">));</span>
    <span class="n">g</span><span class="p">.</span><span class="n">addTransform</span><span class="p">(</span><span class="n">AffineTransform</span><span class="o">::</span><span class="n">scale</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">scale</span><span class="p">));</span>

    <span class="n">g</span><span class="p">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">withPosition</span><span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
    <span class="n">g</span><span class="p">.</span><span class="n">restoreState</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// Balls
</span>  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">b</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setColour</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">colour</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">saveState</span><span class="p">();</span>

    <span class="k">auto</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getPosition</span><span class="p">();</span>
    <span class="n">g</span><span class="p">.</span><span class="n">addTransform</span><span class="p">(</span><span class="n">AffineTransform</span><span class="o">::</span><span class="n">translation</span><span class="p">(</span><span class="n">pos</span><span class="p">));</span>
    <span class="n">g</span><span class="p">.</span><span class="n">addTransform</span><span class="p">(</span><span class="n">AffineTransform</span><span class="o">::</span><span class="n">scale</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">scale</span><span class="p">));</span>

    <span class="n">g</span><span class="p">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">withPosition</span><span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>

    <span class="n">g</span><span class="p">.</span><span class="n">restoreState</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="hud">HUD</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">paintHUD</span><span class="p">(</span><span class="n">Graphics</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">String</span> <span class="n">p1Score</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">score</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">p2Score</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">score</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">nBalls</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>

  <span class="k">auto</span> <span class="n">row</span><span class="p">(</span><span class="n">getLocalBounds</span><span class="p">().</span><span class="n">removeFromTop</span><span class="p">(</span><span class="mi">32</span><span class="p">));</span>
  <span class="c1">//g.setColour(Colour(30,30,30));
</span>  <span class="c1">//g.fillRect(row);
</span>
  <span class="n">g</span><span class="p">.</span><span class="n">setColour</span><span class="p">(</span><span class="n">Colour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">));</span>
  <span class="n">g</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">p1Score</span><span class="p">,</span> <span class="n">row</span><span class="p">.</span><span class="n">removeFromLeft</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="n">withTrimmedLeft</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">Justification</span><span class="o">::</span><span class="n">centredLeft</span><span class="p">);</span>
  <span class="n">g</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">p2Score</span><span class="p">,</span> <span class="n">row</span><span class="p">.</span><span class="n">removeFromRight</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="n">withTrimmedRight</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">Justification</span><span class="o">::</span><span class="n">centredRight</span><span class="p">);</span>
  <span class="n">g</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">nBalls</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">Justification</span><span class="o">::</span><span class="n">centred</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h1 id="game-logic">Game Logic</h1>

<h2 id="the-game-object">The Game Object</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">Game</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">Game</span><span class="p">()</span> <span class="o">:</span> <span class="n">state</span><span class="p">(),</span> <span class="n">gameOverState</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PongHelpers</span><span class="o">::</span><span class="n">resetGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">~</span><span class="n">Game</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isKeyDown</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">restartGame</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">PongHelpers</span><span class="o">::</span><span class="n">resetGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Need time since last update.
</span>    <span class="kt">float</span> <span class="n">dt</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">/</span> <span class="mf">60.0</span><span class="n">f</span><span class="p">;</span>
    <span class="n">updateTimersBy</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>

    <span class="n">updatePlayers</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>
    <span class="n">updateBalls</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>
    <span class="n">animateLine</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>

    <span class="c1">// Lel add more balls
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isKeyDown</span><span class="p">(</span><span class="n">KeyPress</span><span class="p">(</span><span class="n">KeyPress</span><span class="o">::</span><span class="n">spaceKey</span><span class="p">)))</span> <span class="p">{</span>
      <span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="p">{</span><span class="n">WINDOW_WIDTHF</span><span class="o">*</span><span class="mf">0.5</span><span class="n">f</span> <span class="o">-</span> <span class="mf">16.0</span><span class="n">f</span><span class="p">,</span><span class="n">WINDOW_HEIGHTF</span><span class="o">*</span><span class="mf">0.5</span><span class="n">F</span> <span class="o">-</span> <span class="mf">16.0</span><span class="n">f</span><span class="p">,</span><span class="mf">32.0</span><span class="n">f</span><span class="p">,</span><span class="mf">32.0</span><span class="n">f</span><span class="p">},</span> <span class="n">GameHelpers</span><span class="o">::</span><span class="n">getRandomColour</span><span class="p">()</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="c1">// Game over check
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">gameOverState</span><span class="p">.</span><span class="n">isGameOver</span><span class="p">())</span> <span class="p">{</span>
      <span class="c1">// It's game over. :/
</span>      <span class="n">PongHelpers</span><span class="o">::</span><span class="n">resetGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">GameState</span><span class="o">&amp;</span> <span class="n">getState</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">updateTimersBy</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">state</span><span class="p">.</span><span class="n">timeSpent</span> <span class="o">+=</span> <span class="n">dt</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">updatePlayers</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isKeyDown</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">up</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">GameHelpers</span><span class="o">::</span><span class="n">moveVertical</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">.</span><span class="n">speed</span> <span class="o">*</span> <span class="n">dt</span><span class="p">);</span>
        <span class="n">GameHelpers</span><span class="o">::</span><span class="n">clampVertical</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isKeyDown</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">down</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">GameHelpers</span><span class="o">::</span><span class="n">moveVertical</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">speed</span> <span class="o">*</span> <span class="n">dt</span><span class="p">);</span>
        <span class="n">GameHelpers</span><span class="o">::</span><span class="n">clampVertical</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">updateBalls</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">b</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">ballMove</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">dt</span><span class="p">);</span>
      <span class="n">ballCollide</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
      <span class="n">ballScore</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">ballMove</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">,</span> <span class="kt">float</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Movement
</span>    <span class="n">GameHelpers</span><span class="o">::</span><span class="n">moveHorizontal</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">speedx</span> <span class="o">*</span> <span class="n">dt</span><span class="p">);</span>
    <span class="n">GameHelpers</span><span class="o">::</span><span class="n">moveVertical</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">speedy</span> <span class="o">*</span> <span class="n">dt</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isOutsideVertically</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">b</span><span class="p">.</span><span class="n">speedy</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">speedy</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">GameHelpers</span><span class="o">::</span><span class="n">clampVertical</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">ballScore</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Score?
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">GameHelpers</span><span class="o">::</span><span class="n">isOutsideHorizontally</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Hehehe how else do we check?
</span>        <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">score</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">score</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">PongHelpers</span><span class="o">::</span><span class="n">resetBall</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">ballCollide</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Lazy collisions. But comon it's just 1 ball and 2 players. At least for now ;))) jk it will always be 2 players this time. At least for LE BALLZ
</span>    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">intersectionBody</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">intersectRectangle</span><span class="p">(</span><span class="n">intersectionBody</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// Hacky way to check if it came in from down under or what's goin on hehehehehe
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">intersectionBody</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">intersectionBody</span><span class="p">.</span><span class="n">getHeight</span><span class="p">())</span> <span class="p">{</span>
          <span class="n">b</span><span class="p">.</span><span class="n">realSpeed</span> <span class="o">+=</span> <span class="mf">15.0</span><span class="n">f</span><span class="p">;</span>

          <span class="k">auto</span> <span class="n">bounceAngle</span> <span class="o">=</span> <span class="n">PongHelpers</span><span class="o">::</span><span class="n">getBounceAngle</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">,</span> <span class="n">intersectionBody</span><span class="p">);</span>
          <span class="n">PongHelpers</span><span class="o">::</span><span class="n">setBallWithBounceAngle</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">bounceAngle</span><span class="p">);</span>
          <span class="n">PongHelpers</span><span class="o">::</span><span class="n">moveToPaddleEdge</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">animateLine</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">state</span><span class="p">.</span><span class="n">lineY</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="mf">16.0</span><span class="n">f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">lineY</span> <span class="o">&gt;=</span> <span class="mf">48.0</span><span class="n">f</span><span class="p">)</span>  <span class="n">state</span><span class="p">.</span><span class="n">lineY</span> <span class="o">-=</span> <span class="mf">48.0</span><span class="n">f</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Data
</span>  <span class="n">GameState</span> <span class="n">state</span><span class="p">;</span>

  <span class="c1">// Misc
</span>  <span class="n">GameOverState</span> <span class="n">gameOverState</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<h2 id="other-things">Other things</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="n">GameOverState</span> <span class="p">{</span>
  <span class="k">enum</span> <span class="k">class</span> <span class="nc">GameMode</span> <span class="o">:</span> <span class="kt">int</span> <span class="p">{</span> <span class="n">Timed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MaxScore</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">};</span>

  <span class="n">GameOverState</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="o">:</span> <span class="n">state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">bool</span> <span class="n">isGameOver</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="n">GameMode</span><span class="p">:</span><span class="o">:</span><span class="n">Timed</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">state</span><span class="p">.</span><span class="n">timeSpent</span> <span class="o">&gt;=</span> <span class="n">matchTime</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">GameMode</span><span class="p">:</span><span class="o">:</span><span class="n">MaxScore</span><span class="o">:</span>
      <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">p</span> <span class="o">:</span> <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">score</span> <span class="o">&gt;=</span> <span class="n">maxScore</span><span class="p">)</span>
          <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Need access to the state. hu....
</span>  <span class="n">GameState</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">;</span>

  <span class="c1">// Data we need?
</span>  <span class="n">GameOverState</span><span class="o">::</span><span class="n">GameMode</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">GameOverState</span><span class="o">::</span><span class="n">GameMode</span><span class="o">::</span><span class="n">Timed</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">maxScore</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">timeLeft</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">matchTime</span> <span class="o">=</span> <span class="mf">60.0</span><span class="n">f</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<h1 id="helper-functions">Helper Functions</h1>

<p>These functions came about when refactoring and thinking of how to use the data structs while not really using their super structure.</p>

<p>I was mostly inspried by GameMaker and the like.</p>

<h2 id="the-gamehelpers-namespace">the GameHelpers namespace</h2>

<p>So it’s in a namespace so I know which “helper” is general and which is game specific. It’s probably the wrong way of doing everything.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">namespace</span> <span class="n">GameHelpers</span> <span class="p">{</span></code></pre></figure>

<h3 id="gamehelpersclampvertical">GameHelpers::clampVertical()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// *  Positioning functions
</span>  <span class="c1">// Clamp a rectangle to window vertically
</span>  <span class="kt">void</span> <span class="nf">clampVertical</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">oldY</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">getY</span><span class="p">();</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">withY</span><span class="p">(</span><span class="n">juce</span><span class="o">::</span><span class="n">jlimit</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="n">WINDOW_HEIGHTF</span> <span class="o">-</span> <span class="n">r</span><span class="p">.</span><span class="n">getHeight</span><span class="p">(),</span> <span class="n">oldY</span><span class="p">));</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersclamphorizontal">GameHelpers::clampHorizontal()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// Clamp a rectangle to window horizontally
</span>  <span class="kt">void</span> <span class="nf">clampHorizontal</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">oldX</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">getX</span><span class="p">();</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">withX</span><span class="p">(</span><span class="n">juce</span><span class="o">::</span><span class="n">jlimit</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="n">WINDOW_WIDTHF</span> <span class="o">-</span> <span class="n">r</span><span class="p">.</span><span class="n">getWidth</span><span class="p">(),</span> <span class="n">oldX</span><span class="p">));</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersmovehorizontal">GameHelpers::moveHorizontal()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// Move a rectangle horizontally
</span>  <span class="kt">void</span> <span class="nf">moveHorizontal</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">r</span><span class="p">,</span> <span class="k">const</span> <span class="kt">float</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">withX</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">+</span> <span class="n">amount</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersmovevertical">GameHelpers::moveVertical()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// Move a rectangle vertically
</span>  <span class="kt">void</span> <span class="nf">moveVertical</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">r</span><span class="p">,</span> <span class="k">const</span> <span class="kt">float</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">withY</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">+</span> <span class="n">amount</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersisoutsidevertically">GameHelpers::isOutsideVertically()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// When a rectangle is just touching outside the screen vertically
</span>  <span class="kt">bool</span> <span class="nf">isOutsideVertically</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">WINDOW_HEIGHTF</span> <span class="o">-</span> <span class="n">r</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()))</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersisoutsidehorizontally">GameHelpers::isOutsideHorizontally()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// When a rectangle IS wholly outside the screen horizontally
</span>  <span class="kt">bool</span> <span class="nf">isOutsideHorizontally</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">r</span><span class="p">.</span><span class="n">getWidth</span><span class="p">())</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">WINDOW_WIDTHF</span> <span class="o">+</span> <span class="n">r</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()))</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersiskeydown">GameHelpers::isKeyDown()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="c1">// Is a keypress active
</span>  <span class="kt">bool</span> <span class="nf">isKeyDown</span><span class="p">(</span><span class="k">const</span> <span class="n">KeyPress</span><span class="o">&amp;</span> <span class="n">k</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="n">KeyPress</span><span class="o">::</span><span class="n">isKeyCurrentlyDown</span><span class="p">(</span><span class="n">k</span><span class="p">.</span><span class="n">getKeyCode</span><span class="p">());</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersgetrandom">GameHelpers::getRandom()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span> <span class="nf">getRandom</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">static_cast</span> <span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">rand</span><span class="p">())</span> <span class="o">/</span> <span class="k">static_cast</span> <span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">RAND_MAX</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="gamehelpersgetrandomcolour">GameHelpers::getRandomColour()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">Colour</span> <span class="nf">getRandomColour</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Colour</span><span class="o">::</span><span class="n">fromHSV</span><span class="p">(</span><span class="n">getRandom</span><span class="p">(),</span> <span class="mf">0.90</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<p>end of the namespace GameHelpers</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="p">};</span></code></pre></figure>

<h2 id="the-ponghelpers-namespace">the PongHelpers namespace</h2>

<p>These are a bit crazy.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">namespace</span> <span class="n">PongHelpers</span> <span class="p">{</span></code></pre></figure>

<h3 id="ponghelpersgetbounceangle">PongHelpers::getBounceAngle()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span> <span class="nf">getBounceAngle</span><span class="p">(</span><span class="k">const</span> <span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">player</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&amp;</span> <span class="n">intersection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="k">static</span> <span class="kt">float</span> <span class="n">MAXBOUNCEANGLE</span> <span class="o">=</span> <span class="mf">5.0</span><span class="n">f</span> <span class="o">*</span> <span class="n">float_Pi</span> <span class="o">/</span> <span class="mf">12.0</span><span class="n">f</span><span class="p">;</span>

    <span class="k">auto</span> <span class="n">acy</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">getCentreY</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">bcy</span> <span class="o">=</span> <span class="n">intersection</span><span class="p">.</span><span class="n">getCentreY</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">relativeIntersectY</span> <span class="o">=</span> <span class="n">acy</span> <span class="o">-</span> <span class="n">bcy</span><span class="p">;</span>
    <span class="k">auto</span>  <span class="n">normalizedRelativeIntersectionY</span> <span class="o">=</span> <span class="p">(</span><span class="n">relativeIntersectY</span> <span class="o">/</span> <span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.5</span><span class="n">f</span><span class="p">));</span>

    <span class="k">return</span> <span class="n">normalizedRelativeIntersectionY</span> <span class="o">*</span> <span class="n">MAXBOUNCEANGLE</span><span class="p">;</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="ponghelperssetballwithbounceanlge">PongHelpers::setBallWithBounceAnlge()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">void</span> <span class="nf">setBallWithBounceAngle</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">,</span> <span class="kt">float</span> <span class="n">bounceAngle</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">speedx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">b</span><span class="p">.</span><span class="n">speedx</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">realSpeed</span> <span class="o">*</span>  <span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">bounceAngle</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">b</span><span class="p">.</span><span class="n">speedx</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">realSpeed</span> <span class="o">*</span>   <span class="n">cos</span><span class="p">(</span><span class="n">bounceAngle</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">b</span><span class="p">.</span><span class="n">speedy</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">realSpeed</span> <span class="o">*</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">bounceAngle</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="ponghelpersmovetopaddleedge">PongHelpers::moveToPaddleEdge()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">void</span> <span class="nf">moveToPaddleEdge</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">,</span> <span class="n">Player</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOW_WIDTHF</span><span class="o">*</span><span class="mf">0.5</span><span class="n">f</span><span class="p">))</span> <span class="p">{</span>
      <span class="c1">// On the right side going left
</span>      <span class="n">b</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">withX</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">-</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getWidth</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// On the left side going right
</span>      <span class="n">b</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">withX</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getRight</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="ponghelpersresetball">PongHelpers::resetBall()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">void</span> <span class="nf">resetBall</span><span class="p">(</span><span class="n">Ball</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">b</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">((</span><span class="n">WINDOW_WIDTHF</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">)</span>
                              <span class="p">,</span> <span class="p">(</span><span class="n">WINDOW_HEIGHTF</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">)</span>
                              <span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span>
                              <span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">getHeight</span><span class="p">());</span>
    <span class="n">b</span><span class="p">.</span><span class="n">realSpeed</span> <span class="o">=</span> <span class="mf">100.0</span><span class="n">f</span><span class="p">;</span>
  <span class="p">}</span></code></pre></figure>

<h3 id="ponghelpersresetgame">PongHelpers::resetGame()</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">void</span> <span class="nf">resetGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Reload players
</span>    <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="n">KeyPress</span><span class="p">(</span><span class="sc">'w'</span><span class="p">),</span> <span class="n">KeyPress</span><span class="p">(</span><span class="sc">'s'</span><span class="p">),{</span> <span class="mf">48.0</span><span class="n">f</span><span class="p">,</span><span class="mf">320.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">20.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">128.0</span><span class="n">f</span> <span class="p">}</span> <span class="p">});</span>
    <span class="n">state</span><span class="p">.</span><span class="n">players</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="n">KeyPress</span><span class="p">(</span><span class="n">KeyPress</span><span class="o">::</span><span class="n">upKey</span><span class="p">),</span> <span class="n">KeyPress</span><span class="p">(</span><span class="n">KeyPress</span><span class="o">::</span><span class="n">downKey</span><span class="p">),{</span> <span class="n">WINDOW_WIDTHF</span> <span class="o">-</span> <span class="mf">20.0</span><span class="n">f</span> <span class="o">-</span> <span class="mf">48.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">320.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">20.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">128.0</span><span class="n">f</span> <span class="p">}</span> <span class="p">});</span>

    <span class="c1">// Reload balls
</span>    <span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">32</span> <span class="p">}</span> <span class="p">});</span>
    <span class="n">PongHelpers</span><span class="o">::</span><span class="n">resetBall</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">balls</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="c1">// Reset time
</span>    <span class="n">state</span><span class="p">.</span><span class="n">timeSpent</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>
  <span class="p">}</span></code></pre></figure>

<p>end of the namespace PongHelpers.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="p">};</span></code></pre></figure>

<h2 id="downloads">Downloads</h2>

<p>Not really available yet. I’m trying out links anyway.</p>

<p><a href="/assets/MyPong-win32.zip">Win build</a> directly.
<a href="/assets/MyPong-mac.zip">Mac build</a> directly.
<a href="/assets/MyPong-linux.zip">Linux build</a> directly.</p>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Kewk</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Kewk
            
            </li>
            
            <li><a href="mailto:donthaveone@example.com">donthaveone@example.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/srejv"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">srejv</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/none"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">none</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Things. Things.. I was just thinking of making some games and posting stuff here for myself. Not really cool stuff.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
